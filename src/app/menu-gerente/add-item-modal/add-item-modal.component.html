<!-- Modal para adicionar item -->
<!-- ComentÃ¡rios: explico cada bloco para facilitar manutenÃ§Ã£o futura -->
<div class="modal-overlay">
  <div class="modal-content" [@modalAnimation]="'in'">
    <!-- TÃ­tulo do modal -->
    <h3>Adicionar novo Item</h3>

    <!-- FormulÃ¡rio principal: chama onSubmit() no componente TS -->
    <form (ngSubmit)="onSubmit()">
      
      <!-- Campo de imagem: permite URL ou seleÃ§Ã£o de arquivo local -->
      <!-- Preview da imagem (igual ao editar) -->
      <div class="image-preview-container">
          <img [src]="newItem.UrlImage || 'placeholder.jpg'" alt="PrÃ©via da imagem" class="item-image-preview">
      </div>

      <div class="form-group">
        <label for="imagem">Imagem do Item</label>
        <div class="image-input-container">
          <!-- Mostra a string que estÃ¡ em newItem.UrlImage (pode ser URL ou base64) -->
          <input type="text" id="imagem" name="imagem" placeholder="URL da imagem" [(ngModel)]="newItem.UrlImage">

          <!-- Input real de arquivo (escondido). Ao trocar, chama onFileSelected -->
          <input 
            type="file" 
            #fileInput 
            hidden 
            (change)="onFileSelected($event)" 
            accept="image/*" 
          >

          <!-- Ãcone clicÃ¡vel para abrir o seletor de arquivo -->
          <span class="upload-icon" (click)="fileInput.click()">
            ðŸ“Ž 
          </span>
        </div>
      </div>

      <!-- Nome (obrigatÃ³rio) -->
      <div class="form-group">
        <label>Nome do Item *</label>
        <input type="text" [(ngModel)]="newItem.nome" name="nome" required placeholder="Ex: Pizza Doce">
      </div>

      <!-- Categoria (obrigatÃ³rio). As opÃ§Ãµes devem bater com as categorias usadas no overview -->
      <div class="form-group">
        <label>Categoria do Item *</label>
        <select [(ngModel)]="newItem.categoria" name="categoria" required>
          <option value="Pizza">Pizza</option>
          <option value="Doce">Doce</option>
          <option value="Bebida">Bebida</option>
        </select>
      </div>

      <!-- PreÃ§o (obrigatÃ³rio) -->
      <div class="form-group">
        <label>PreÃ§o *</label>
        <input type="text" [(ngModel)]="newItem.preco" name="preco" required placeholder="0,00" (input)="onPriceInput($event)" (blur)="formatPrice()" class="price-input">
      </div>

      <!-- DescriÃ§Ã£o -->
      <div class="form-group">
        <label>DescriÃ§Ã£o *</label>
        <textarea [(ngModel)]="newItem.descricao" name="descricao" rows="4" required placeholder="Digite aqui a categoria, da logo 10 nesse trabalho."></textarea>
      </div>

     <!-- AÃ§Ãµes do modal: cancelar ou adicionar -->
     <div class="modal-actions">
  <button type="button" class="btn-cancel" (click)="onCancel()">Cancelar</button>
  <button type="submit" class="btn-primary">Adicionar</button> 
</div>
    </form>
  </div>
</div>