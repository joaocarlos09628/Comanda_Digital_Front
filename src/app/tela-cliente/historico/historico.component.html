<div class="historico-root">
	<div class="tabs">
		<button [class.active]="tab==='favoritos'" (click)="tab='favoritos'">Favoritos</button>
		<button [class.active]="tab==='historico'" (click)="tab='historico'">Histórico</button>
	</div>

	<div *ngIf="tab==='favoritos'">
		<section class="favorites-list">
			<div *ngIf="favoritos.length === 0" class="center">Nenhum prato favorito</div>
			<div *ngFor="let item of favoritos" class="fav-card" (click)="abrirDetalhe(item)">
				<img [src]="item.UrlImage || item.img || 'assets/placeholder.png'" alt="{{item.nome}}" />
				<div class="fav-meta">
					<div class="fav-name">{{ item.nome }}</div>
					<div class="fav-price">{{ item.preco || item.price || 'R$ 0,00' }}</div>
				</div>
				<button class="fav-heart" (click)="toggleFav(item); $event.stopPropagation()">♥</button>
			</div>
		</section>
	</div>

	<div *ngIf="tab==='historico'">
		<div *ngIf="loading" class="center">Carregando pedidos...</div>
		<div *ngIf="errorMsg" class="error">{{ errorMsg }}</div>
		<div *ngIf="!loading && orders.length === 0 && !errorMsg" class="center">Nenhum pedido encontrado.</div>

		<section class="orders-list">
			<article *ngFor="let order of orders" class="order-card" [class.cancelled]="isCancelled(order.status)">
				<div class="card-left">
					<img [src]="firstImage(order)" alt="Pedido {{order.id}}"/>
				</div>
				<div class="card-right">
					<div class="title-row">
						<div class="title" [class.canceladoText]="isCancelled(order.status)">{{ titleFor(order) }}</div>
						<div class="order-number">Pedido #{{ order.id }}</div>
					</div>

					<div class="total">{{ displayTotal(order) }}</div>

					<div class="actions">
						<button *ngIf="isInProgress(order.status)" class="btn btn-track" (click)="acompanhar(order)">Acompanhar pedido</button>
						<button *ngIf="isDelivered(order.status)" class="btn btn-reorder" (click)="pedirNovamente(order)">Peça novamente</button>
					</div>

					<div *ngIf="!order.items || order.items.length === 0" class="muted">Pedido sem itens</div>
				</div>
			</article>
		</section>
	</div>

	<!-- bottom nav (mantido) -->
	<nav class="bottom-nav">
		<a routerLink="/cliente" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }" class="nav-item" title="Home">
			<!-- svg omitted for brevity -->
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
				<path d="M3 11.5L12 4l9 7.5" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
				<path d="M5 12v7a1 1 0 001 1h3v-5h6v5h3a1 1 0 001-1v-7" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" />
			</svg>
		</a>

		<a routerLink="/cliente/carrinho" routerLinkActive="active" class="nav-item" title="Carrinho">
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
				<path d="M6 6h15l-1.5 9h-11L6 6z" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
				<path d="M6 6L4 2H2" stroke="#111" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
				<circle cx="10" cy="20" r="1" fill="#111" />
				<circle cx="18" cy="20" r="1" fill="#111" />
			</svg>
		</a>

		<a routerLink="/cliente/historico" routerLinkActive="active" class="nav-item" title="Favoritos">
			<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden>
				<path d="M20.8 7.2a4.6 4.6 0 00-6.5 0L12 9.5l-2.3-2.3a4.6 4.6 0 00-6.5 6.5L12 21l8.8-7.3a4.6 4.6 0 000-6.5z" stroke="#111" stroke-width="1" stroke-linecap="round" stroke-linejoin="round"/>
			</svg>
		</a>
	</nav>
</div>
